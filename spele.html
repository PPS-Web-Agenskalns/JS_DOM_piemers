<!DOCTYPE html>
<html>


<head>
    <style>
        /*Html dizains laukumam*/
        #spele {
            background: lightblue;
            border: 10px solid darkgreen;
        }

    </style>
</head>

<body>

    <!---Izveidojam laukumu ar HTML-->
    <canvas id="spele" width="700" height="400"></canvas>
</body>

</html>

<script>
    //1. Programmas daļa mainīgie

    //Const - mainīgie kurus nevar mainīt - konstantes
    //Iegūstam no HTML info par pašu laukumu
    const spelesLaukums = document.getElementById("spele");
    //Norādam, ka spēle būs 2d ar canvas iebūvētu funkciju
    const spelesLaukums_ctx = spelesLaukums.getContext("2d");

    //Izveidojam "Klausītāju", lai reģistrētu, kad tiek nospiesta poga
    document.addEventListener("keydown", kontroles);

    //Objekts ar nosaukumu speletajs un 4 mainīgajiem x, y, w, h (x pozīcija, y pozīcija, platums augstums)
    let speletajs = {
        x: 70,
        y: 50,
        w: 50,
        h: 50,
    }

    //Vēlviens objekts
    let ediens = {
        x: 200,
        y: 70,
        w: 20,
        h: 20,
    }

    //Mainīgie, lai aprēķinātu vai objekti pārklājas
    let LK = speletajs.x;
    let LL = speletajs.x + speletajs.w;
    let MK = ediens.x;
    let ML = ediens.x + ediens.w;
    let LAug = speletajs.y;
    let LApk = speletajs.y + speletajs.h;
    let MAug = ediens.y;
    let MApk = ediens.y + ediens.h;





    //2. Funkcijas
    function main() {

        setTimeout(function onTick() {
            notiritEkranu();
            uzzimetSpeletaju();
            uzzimetEdienu();

            LK = speletajs.x;
            LL = speletajs.x + speletajs.w;
            MK = ediens.x;
            ML = ediens.x + ediens.w;
            LAug = speletajs.y;
            LApk = speletajs.y + speletajs.h;
            MAug = ediens.y;
            MApk = ediens.y + ediens.h;

            if ((LK <= MK && LL >= ML) && (LApk > MApk && LAug < MAug)) {
                aped();
            }


            //console.log(1)

            main();
        }, 1)
    }

    function aped() {
        ediens.x = Math.floor(Math.random() * 700);
        ediens.y = Math.floor(Math.random() * 400);

        //console.log(ediens.x, ediens.y);
        //ediens.w = null;
        //ediens.h = null;
    }


    function uzzimetSpeletaju() {
        spelesLaukums_ctx.fillStyle = 'red';
        spelesLaukums_ctx.strokestyle = 'black';
        spelesLaukums_ctx.fillRect(speletajs.x, speletajs.y, speletajs.w, speletajs.h);
        spelesLaukums_ctx.strokeRect(speletajs.x, speletajs.y, speletajs.w, speletajs.h);
    }

    function uzzimetEdienu() {
        spelesLaukums_ctx.fillStyle = 'yellow';
        spelesLaukums_ctx.strokestyle = 'orange';
        spelesLaukums_ctx.fillRect(ediens.x, ediens.y, ediens.w, ediens.h);
        spelesLaukums_ctx.strokeRect(ediens.x, ediens.y, ediens.w, ediens.h);
    }

    function notiritEkranu() {
        spelesLaukums_ctx.fillStyle = 'lightblue';
        spelesLaukums_ctx.strokestyle = 'darkgreen';

        spelesLaukums_ctx.fillRect(0, 0, 700, 400);
        spelesLaukums_ctx.strokeRect(0, 0, 700, 400);
    }

    function kontroles(event) {
        if (event.keyCode == 32) {

            speletajs.h = speletajs.h + 10;
            speletajs.w = speletajs.w + 10;
            console.log(speletajs);

        }
        if (event.keyCode == 39) {


            speletajs.x = speletajs.x + 10;
        }
        if (event.keyCode == 37) {



            speletajs.x = speletajs.x - 10;
        }
        if (event.keyCode == 38) {
            speletajs.y = speletajs.y - 10;
        }
        if (event.keyCode == 40) {
            speletajs.y = speletajs.y + 10;
        }

    }

    //3. Pati programma
    uzzimetSpeletaju();
    main();

</script>
